'** SCROLLING MAP 0.3 **

'GET MAP SIZE
MAPW=PEEK(ROM(3)+2)
MAPH=PEEK(ROM(3)+3)

'INITIAL CAMERA POSITION
CAMX=176
CAMY=188
MAPCOL=INT(CAMX/8)
MAPROW=INT(CAMY/8)

'COPY VISIBLE AREA FROM MAP MEMORY TO BACKGROUND
BG COPY MAPCOL,MAPROW,21,17 TO MAPCOL,MAPROW

GAMEPAD 1

DO
  'MOVE CAMERA
  IF UP(0) AND CAMY>0 THEN CAMY=CAMY-1
  IF DOWN(0) AND CAMY<MAPH*8-128 THEN CAMY=CAMY+1
  IF LEFT(0) AND CAMX>0 THEN CAMX=CAMX-1
  IF RIGHT(0) AND CAMX<MAPW*8-160 THEN CAMX=CAMX+1

  'GET NEW MAP POSITION
  COL=INT(CAMX/8)
  ROW=INT(CAMY/8)

  'COPY RIGHT OR LEFT EDGE FROM MAP MEMORY TO BACKGROUND
  IF COL>MAPCOL THEN
    BG COPY COL+20,ROW,1,17 TO COL+20,ROW
    MAPCOL=COL
  ELSE IF COL<MAPCOL THEN
    BG COPY COL,ROW,1,17 TO COL,ROW
    MAPCOL=COL
  END IF

  'COPY BOTTOM OR TOP EDGE FROM MAP MEMORY TO BACKGROUND
  IF ROW>MAPROW THEN
    BG COPY COL,ROW+16,21,1 TO COL,ROW+16
    MAPROW=ROW
  ELSE IF ROW<MAPROW THEN
    BG COPY COL,ROW,21,1 TO COL,ROW
    MAPROW=ROW
  END IF

  'SET BACKGROUND OFFSET (WRAPS AROUND EDGES)
  SCROLL 0,CAMX,CAMY

  WAIT VBL
LOOP


#1:MAIN PALETTES
182D0424003D3824003F2A14003F1B06
00242A150034202A00000000003F2A15

#2:MAIN CHARACTERS
00000000000000000000000000000000
00000000000000000808400200202101
030F1E1F3B3F2E05000001000400113A
C0E0C060E8C090400010389C143C6CBC
4200210008004200FDFFDFFFFFFFFFFF
BBBBBBBBBBBBBBBB4444444444444444
BBBFA7BFFFFFFFBB447C7C7C7E7E7E44
00000000000000000000000000000000
001870E0C141861C3C668F1F3FBFFE1C
1E2359D0B0A00141FFFFE7EFCFDFFFBF
0098F4E603C1F010FFFFEFDFFFFFFFFF
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000000000000000000000
00000000000000001408800200A04404
1200010003070F072D3F1E0F03070F07
80000000C0E0F0E07CFCF8F0C0E0F0E0
FE8181818181817F017F7F7F7F7F7FFF
11FF22FF88FF22FFFFFFFFFFFFFFFFFF
7FFF7EFFFEFF7EFFFF818181B1A18181
11FF7EFFFEFF22FFFF81BDBD81FFFFFF
00400060000401000020F06000020F00
02325E4EA4C08080FFFFFFFFDFBFFFFF
D88C0486030301013F7FFF7FFFFFFFFF

#3:MAIN BG
0000404009020A0209020A0209020A02
09020A0209020A0209020A0209020A02
09020A0209020A020403040309020902
0A0209020A0209020A0209020A020902
0A0209020A0209020A0209020A020902
09020A0209020A0209020A0209020A02
09020A0209020A02090209020A020902
0A02090209020A0209020A0209020A02
0403040319021A0219021A0219021A02
19021A0219021A0219021A0219021A02
19021A0219021A020403040319021902
1A0219021A0219021A0219021A021902
1A0219021A0219021A0219021A021902
19021A0219021A0219021A0219021A02
19021A0219021A02190219021A021902
1A02190219021A0219021A0219021A02
0403040309020A0209020A0209020A02
09020A0209020A0209020A0209020A02
09020A02000000000403040318020000
01000000000018020000000000000000
00000000080200000000110011000100
01000100000002000300180200000200
03000200030000000000080218020200
03000000010002000300180204010401
0403040319021A0219021A0219021A02
19021A0219021A0219021A0219021A02
19021A02180200000403040300000000
00000200030000000000180202000300
00000000000000000000000001000000
00000000000012001300000000001200
13001200130001000000180200001200
13000000000012001300000004010401
0403040309020A0209020A0209020A02
18020000080200000000000000000000
18020000080200000403040301000000
00001200130001000100000012001300
08020000180200000200030000000802
00000802000000001802020003001402
14021402140214021402140214021402
14021402140214021402140204010401
0403040319021A0219021A0219021A02
00000000000002000300000018020802
00000000000000000403040300000000
18020000000001000000000000000000
00000000000000001200130001000100
18020000010001000000120013001402
01000000010005050505050500001802
00000000000000000000000004010401
0403040309020A0209020A0209020A02
00000200030012001300020003000000
00000000000000000403040304030000
18020000000000000200030002000300
02000300000018020000000001000000
00000000010001000000000000001402
01001100010005050505050500000000
05050505050505050000040104010401
0403040319021A0219021A0219021A02
01001200130002000300120013000200
03000000180200000000040304030000
00000802000000001200130012001300
12001300000000000802010000000000
02000300000001001100010000001402
00000000000015041604170400000000
05050505050505050000040104010403
0403040309020A0209020A0209020A02
02000300000012001300000000001200
13000000000008020000040304030000
00000000000000000000020003000200
03000000010000000000000000000000
12001300000001000100000000001402
00001802000000000401000000000000
05050505050505050000040104010403
0403040319021A0219021A0219021A02
12001300000000000000020003000000
00000000110000000000040304030000
00000000010001000000120013001200
13000000010000000200030000000000
00000000010001000100000000001402
00000000000000000401000018020000
15041704160417040000040104010403
0403040309020A0209020A0208020000
00000100020003000000120013000000
02000300000011000100040304030000
00000000010000000000000000000000
00000100010000001200130000000100
00000100110000000100000000001402
00000505050505050401040104010401
04010401040104010401040104010403
0403040319021A0219021A0218020000
00000000120013000802000018020000
12001300000001000000040304030000
01000100010001000100010001000100
00000000000000000000010001000000
00000000000000001100010001001402
00000505050505050401000000000000
00000000000000000000040104010403
0403040309020A0209020A0200000200
03000000000000000000010011000100
00000000000000000000040304030000
00000100110001000000010000000200
03000000010000001100010000000200
03000000000000000100010000001402
00001704160417040401000005050505
05050505000018020000040104010403
0403040319021A0219021A0200001200
13000000180200000100000000000000
00000200030000000000040304030000
00000100010001000100000000001200
13000000010001000100000000001200
13000000010001000000000000001402
00000401040104010401000005050505
05050505000000000000040104010403
0403040309020A021802000000000000
00000100010000000200030000000100
00001200130000000000040304030000
00000100110000000000000001000000
00000000010001000000000000000000
00000000010000000000000000001402
00000401040104010401000005050505
05050505000000000401040104010403
0403040319021A020000020003000000
08020000110000001200130000000000
00000000000000000000040304030000
00000000000000000000010001000100
00000000000000000000000002000300
00000000000000000000000000001402
00000401040104010401000015041604
17041504000000000401040104030403
0403040309020A020000120013001100
00000000000000000000110000000000
02000300000000000000040304030000
00000000000000000100010011000100
00000000000000000000000012001300
00000200030000000000000000000401
04010401040104010401040104010401
00000000000000000401040104030403
0403040319021A020802000000000000
02000300000001000100000000000000
12001300000000000000040304030403
00000000000001000100000000000100
00000000000002000300000000000000
00001200130000000000000004010401
00001402140214021402140214021402
14021402140214020401040104030403
0403040309020A020000000000001802
12001300000001000000020003000000
00000000110000000000040304030403
00000000000000000000000001000100
00000000000012001300000000000100
01000000000000001100000004010000
00000000000001000000000000000200
03000000000000000401040104030403
0403040319021A020000020003000000
00000000010001000000120013000000
02000300000000000000000004030403
00000000000011000100000000000100
01000100000000000000010011000100
01001100020003000000000004010000
00000000010001000000000000001200
13000000010000000401040104030403
0403040309020A020000120013000000
18020100110000000200030000000000
12001300000000001100010004030403
00000100000001000100010001000000
01000100000001000100010001000000
01000000120013000000000004010000
00001100010000000200030000000000
00000100000000000401040104030403
0403040319021A020000080200000000
00000000000000001200130000000000
00000000010001000000000004030403
00000100010000000000010000000100
11000100010000000000020003000000
01000000000000000000000004010000
01000100010000001200130000000000
00000000000000000401040104030403
0403040309020A020000000000000000
02000300000002000300000011000100
01000100000000000000000004030403
01000100010000000000010001000100
01000100010000000000120013000000
00000000000000000000000004010000
01000100000002000300020003000100
00000000000000000401040104030403
0403040319021A020200030000000000
12001300000012001300010001000100
01000000020003000000000004030403
00000100010000000100010001000000
00000000000000000000000000000000
00000000000000000000040104010000
11000100000012001300120013000000
02000300000000000401040104030403
0403040309020A021200130000000000
00000000020003000000000001000100
01000000120013000000000004030403
00000000000000000000000000000100
00000000000000000000000011000000
02000300000000000000040100000100
01000000020003000000000000000000
12001300000000000401040104010403
0403040319021A020000000000000100
00000000120013001100000000000000
00000100000000000000000004030403
00000000000000000000000000000000
00000000000000000000000000000000
12001300000000001100040100000100
00000000120013000000010001000000
00000000000000000000040104010403
0403040309020A021802000002000300
00000000000001000000000002000300
00000100000001001100000004030403
00000000000005050505050500000000
00000505050505050505000000000000
00000000000000000000040100000000
02000300000000000100010000000000
00000000010000000000040104010403
0403040319021A020000000012001300
00001100010001000000000012001300
00000000010001000000000004030403
00000000000005050505050500001802
00000505050506050505000000001802
05050505050500000000040100000000
12001300000000000000000002000300
00000100110001000000040104010403
0403040309020A020000000000000000
11000000000000000000000000000000
00000100110001000000000004030403
00000000000015041604170400000000
00000505050505050505000000000000
05050505060500000000040100000000
00000000000000000000000012001300
00000000010000000000040104010403
0403040319021A020000110000000000
00000000000000000000000000000000
00000100000000000000000004030403
04031802000000000401000000000000
00001504170416041704180200000000
17041604170400000000040100000000
01000100010002000300000000000000
00000100010001000000040104010403
04030403040304030403040304030403
04030403040304030403040300000000
00000000000000000000000004030403
04030000000000000401040104010401
04010401040104010401040104010401
04010401040100000000040100000100
11000100000012001300000000000802
00000000010000000000040104010403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403000000000403
04030000000000000000000000000000
00001802000000000000000000000000
04010401040104010000040100000100
00000000000018020000000001000000
00000100010000000000040104010401
0403040309020A020000000000000000
00000000000000000403040304030403
04030403040304030403040304030403
04030403000000000000050505050505
00000000000005050505050505050000
04010401040104010401040100000000
00000000080200000100000000000100
00000000000000001802000004010401
0403040319021A020000010000000000
00000100110000000000000000000000
00000000000004030403040304030403
04030403000018020000050505050505
00000000000005050505050505050000
04010401040104010000000000000100
01001802000001001100010001000000
08020000020003000000010004010401
0403040309020A020100110002000300
00000100010001000000000000000000
00000000000000000000000000000403
04030403040300000000170416041704
00000000000015041604170415040000
04010401040104010000000001000100
000009020A0209020A0209020A020000
00000100120013000100010004010401
0403040319021A020100010012001300
00000100010000000200030000000000
00000000080200000000180200000000
04030403040304030000000004010401
04010401040104010401040104010401
04010401040104010000000001001100
000019021A0219021A0219021A020000
01000000000001000100000004010401
0403040309020A020100000000000000
01000100000000001200130000000000
08020802000000000802000000000000
00000403040304030403000018020000
00000401040104010000000000000000
00000000000018020000010000000902
0A0209020A0209020A0209020A020902
0A020802000000000000000004010401
0403040319021A020000020003000000
00000000000000000000000000001802
00000000000000000000000000000000
00000000040304030403000000000000
00000401040104010000000000000000
01000000000000000000000000001902
1A0219021A0219021A0219021A021902
1A020000000002000300000004010401
0403040309020A021802120013000802
00000200030000000000010000000000
00000000000001000100110000000000
00000000000004030403040300000000
01000401040104010000000001000100
00000000000008020000180209020A02
09020A0209020A0209020A0209020A02
08020000180212001300000004010401
0403040319021A020000000000000000
01001200130000000100010000000000
02000300000000000100010000000000
00000000000004030403040300000000
00000401040104010000000001000000
00000000000000000000000019021A02
19021A0219021A0219021A0219021A02
18020000000000000000000004010401
0403040309020A020000000001000100
00000000000001000100110000000000
12001300000000000100000011000000
01000100000000000403040304030000
00000000040100000000000000000100
01000100000000000802000009020902
0A0209020A0209020A02180200000000
00000000110000000000010004010401
0403040319021A020000080200000000
00000802000000000000010001000100
00000000010001000000000000000000
01000100000000000403040304030000
01000000040100000000010001000000
01000100000018020000000019021902
1A0219021A0219021A02180205050505
05050000000001000100000004010401
0403040309020A021802000002000300
00000000000018020000000001000100
00000000010000000000000000000000
01000000000000000403040304030000
00000000040100000100010001000100
01000000000000000100010000000902
0A0209020A0209020A02000005050505
05050000010000000000000004010401
0403040319021A020000000012001300
00000100000002000300000000000000
00000000000011000000020003000000
01000100000000000000040304030403
00000000040100000000000000000000
00000000080200000000000000001902
1A0219021A0219021A02000015041604
17040000000001000000000004010401
0403040309020A020200030000000000
00000100000012001300000001001100
01000000000000000000120013000000
01000100000001000000040304030403
00000000040100000000020003000000
01000000000000000100000008020000
09020A0209020A0209020A0204010401
04010000000000000000000004010401
0403040319021A021200130000000200
03000000000000000000010000000100
01000000020003000000000000000100
00000000000000000000040304030403
00000000040100000000120013000000
01000000010001000100000018020000
19021A0219021A0219021A0204010401
04010401040104010401040104010401
0403040309020A021802020003001200
13000000000000000100010001000000
00000000120013000000000000000100
01000000000000001402140214021402
14020000040100000000000000000000
01000100000001000000000000000100
09020A0209020A0209020A0200000401
00000000000000000000040104010401
0403040319021A020000120013000000
00000000000001000100000001001100
01000000010000000000010001000000
00000000040104010401040104010401
04010401040100000200030002000300
00000000010000000000080200000000
19021A0219021A0219021A0200000000
18020000000000000000040104010403
0403040309020A020200030000000000
00000000010000000000010001000000
00000000000000000000010000000000
00000000040100001402140214021402
14020000000000001200130012001300
00000100000000001802000001000000
09020A0209020A0209020A0202000300
00000000020003000000040104010403
0403040319021A021200130018020100
00000505050505050505050500000000
00001802000000000000000000000000
00000000040100000000040304030403
00000100000000000000020003000000
00000100010011000000010001000000
19021A0219021A0219021A0212001300
00001802120013000000040104010403
0403040309020A020000000001000100
00000505050505050605050500001802
05050505050505050505060500000000
00000000040100000000040304030403
00000000010000000000120013000000
00000100010000000200030000000000
180209020A0209020A02180200000200
03000000000000000000040104010403
0403040319021A021100010001000000
00000505050505050505050500000000
05050505050505050505050500000000
00000000040100000000040304030403
00000100010000000100000000000100
01000100000000001200130000000000
000019021A0219021A02180200001200
13000100110000000000040104010403
0403040309020A020000010000000000
00001504170415041604150400000000
15041604170415041604170400000000
00000000040100000000040304030403
00000100010001001100010001000100
01000000000018020000000008020000
09020A0209020A0209020A0202000300
18020100000000000000040104010403
0403040319021A021802000000000000
18020000000000000402000000000000
00000402000000000402000000000000
00000000040100000000040304030403
00000000000001000100010000000100
00000200030000000000000000000000
19021A0219021A0219021A0212001300
00000802000000000401040104010403
0403040309020A020000050505050505
00000000110000000402040204020402
04020402040204020402040204010401
04010401040100000000040304030403
00000000110001000100000000000100
00001200130008020000000018020000
09020A0209020A0209020A0209020A02
18020000000000000401040104030403
0403040319021A020000050505050605
00001100000000000402040204020402
04020402040204020402040200000000
00000000010000000000040304030403
00000000010000000000000001001100
01000000000000000000000000000000
19021A0219021A0219021A0219021A02
01000000000004010401040104030403
0403040309020A020000150416041704
00000000000000000402040204020402
04020402040204020402040200000000
01000100010000000000040304030403
00000100000002000300000001000100
00000000000001000000000008020000
000009020A0209020A0209020A020000
00000000040104010401040304030403
0403040319021A020000000004020402
04020402040204020402140214021402
14021402140214021402140200000100
11000000000000000401040304030403
00000000000012001300000001000000
00000200030001000100010000000000
000019021A0219021A0219021A020000
00000401040104010403040304030403
0403040309020A020401040104010401
04010401040104010401140204010401
04011402040104010401140200000000
00000000000004010401040304030403
04030000000001000100010001000000
00001200130001001100010000000000
00000000180200001802000000000000
04010401040104030403040304030403
0403040319021A020401040104010401
04010401040104010401040104010401
04010401040104010401040104010401
04010401040104010403040304030403
04030401040100000000000001000100
01000000000000000000000000000401
04010401040104010401040104010401
04010401040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304010401
04010401040104030403040304030403
04030401040104010401010001000000
00000000040104010401040104010401
04010401040104010401040104010401
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040104010401040104010401
04010401040104010401040104010401
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030401040104010401
04010401040104030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403040304030403040304030403
04030403

